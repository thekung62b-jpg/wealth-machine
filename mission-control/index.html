<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Raven World // Mission Control</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#05060b;--card:rgba(12,16,28,.55);--line:rgba(140,180,255,.22);
      --txt:#e8efff;--muted:#9db1d9;--cyan:#55d6ff;--vio:#8b5cf6;--ok:#22c55e;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Arial;background:#05060b;color:var(--txt);overflow:hidden}
    #bg3d{position:fixed;inset:0;z-index:0}
    .glow{position:fixed;inset:0;z-index:1;pointer-events:none;background:
      radial-gradient(40rem 24rem at 15% 10%, rgba(76,201,240,.15), transparent 60%),
      radial-gradient(42rem 26rem at 86% 20%, rgba(139,92,246,.16), transparent 60%)}

    .app{position:relative;z-index:2;height:100%;padding:14px;display:grid;grid-template-columns:320px 1fr 320px;gap:12px}
    .panel{background:var(--card);backdrop-filter:blur(12px);border:1px solid var(--line);border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.35)}
    .left,.right{padding:14px;overflow:auto}
    .mid{display:grid;grid-template-rows:auto 1fr auto;gap:10px;min-width:0}

    .title{font-weight:800;letter-spacing:.3px}
    .sub{font-size:12px;color:var(--muted)}
    .status{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:999px;border:1px solid var(--line);font-size:12px}
    .dot{width:8px;height:8px;border-radius:50%;background:#6ee7b7;box-shadow:0 0 14px #6ee7b7}

    .orb-wrap{display:grid;place-items:center;padding-top:6px}
    .orb{width:210px;height:210px;border-radius:50%;position:relative;
      background:radial-gradient(circle at 35% 28%, #99f6ff, #3b82f6 42%, #4f46e5 65%, #090f1e 88%);
      box-shadow:0 0 0 2px rgba(147,197,253,.25),0 0 80px rgba(76,201,240,.22), inset 0 0 48px rgba(255,255,255,.25);
      animation:float 4.8s ease-in-out infinite}
    .orb::after{content:'ü¶Ö';position:absolute;inset:0;display:grid;place-items:center;font-size:72px}
    .ring,.ring2{position:absolute;inset:-14px;border-radius:50%;border:1px dashed rgba(125,211,252,.45);animation:spin 16s linear infinite}
    .ring2{inset:-30px;border-style:solid;border-color:rgba(139,92,246,.35);animation-duration:24s;animation-direction:reverse}

    .kpi{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:12px}
    .tile{padding:10px;border-radius:12px;border:1px solid var(--line);background:rgba(10,16,30,.55)}
    .tile b{display:block;font-size:18px}

    .top{display:flex;justify-content:space-between;align-items:center;padding:12px 14px}
    .chat{padding:12px;border:1px solid var(--line);border-radius:14px;background:rgba(6,10,20,.52);overflow:auto;min-height:0}
    .msg{max-width:82%;padding:10px 12px;border-radius:12px;margin:8px 0;line-height:1.35}
    .me{margin-left:auto;background:linear-gradient(135deg,#143258,#1c4f86);border:1px solid #2a6cb6}
    .ai{background:linear-gradient(135deg,#1a1c34,#21274d);border:1px solid #3a4687}
    .controls{display:grid;grid-template-columns:1fr auto auto;gap:8px;padding:12px}
    input[type=text]{padding:12px;border-radius:12px;border:1px solid var(--line);background:rgba(9,14,26,.85);color:var(--txt)}
    .btn{padding:10px 12px;border-radius:12px;border:1px solid #335b97;background:#123158;color:#dbeafe;cursor:pointer;font-weight:600}
    .btn.green{background:#12351f;border-color:#1f7a3e}

    .drop{margin-top:10px;border:1px dashed rgba(125,211,252,.45);border-radius:12px;padding:12px;text-align:center;background:rgba(8,14,28,.45)}
    .drop.drag{border-color:#22c55e;background:rgba(34,197,94,.12)}
    .list{font-size:12px;color:#c9daf8;line-height:1.45;max-height:160px;overflow:auto}

    .project{padding:10px;border:1px solid var(--line);border-radius:12px;margin-bottom:8px;background:rgba(8,14,28,.5)}
    .badge{font-size:11px;padding:3px 8px;border-radius:999px;border:1px solid var(--line)}
    .in{color:#86efac;border-color:#22c55e66}.q{color:#fde68a;border-color:#f59e0b66}

    @keyframes spin{to{transform:rotate(360deg)}}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
    @media(max-width:1100px){.app{grid-template-columns:1fr;overflow:auto;height:auto}body{overflow:auto}}
  </style>
</head>
<body>
  <canvas id="bg3d"></canvas><div class="glow"></div>
  <div class="app">
    <aside class="panel left">
      <div class="title">Raven Core</div>
      <div class="sub">Immersive Mission Control</div>
      <div class="orb-wrap"><div class="orb" id="orb"><div class="ring"></div><div class="ring2"></div></div></div>
      <div class="kpi">
        <div class="tile"><span class="sub">Voice</span><b id="voiceState">Locked</b></div>
        <div class="tile"><span class="sub">Mode</span><b>World</b></div>
        <div class="tile"><span class="sub">Uploads</span><b id="upCount">0</b></div>
        <div class="tile"><span class="sub">Avatar</span><b>Raven</b></div>
      </div>
      <div class="drop" id="drop">Drop images/videos/files here<br><span class="sub">or tap to choose</span><input id="fileInput" type="file" multiple hidden></div>
      <ul id="uploads" class="list"></ul>
    </aside>

    <main class="mid">
      <div class="panel top">
        <div><div class="title">ü¶Ö Raven World // Mission Bridge</div><div class="sub">Cinematic UI + voice + uploads</div></div>
        <div class="status"><span class="dot"></span><span id="conn">Ready</span></div>
      </div>
      <section class="panel chat" id="chat">
        <div class="msg ai">I hear you. This version is upgraded. Tap <b>Enable Voice</b> first (mobile browser policy), then Speak.</div>
      </section>
      <div class="panel controls">
        <input id="text" type="text" placeholder="Command Raven...">
        <button class="btn" id="send">Send</button>
        <button class="btn green" id="mic">üéôÔ∏è Speak</button>
      </div>
      <div class="panel" style="padding:10px 12px;display:flex;gap:8px;align-items:center;justify-content:space-between">
        <div class="sub">If voice is silent on phone, tap Enable Voice once.</div>
        <button class="btn" id="unlock">üîä Enable Voice</button>
      </div>
    </main>

    <aside class="panel right">
      <div class="title">Project Pulse</div>
      <div class="project"><b>Voice Avatar Portal</b> <span class="badge in">In Progress</span><div class="sub">Now improving realism + backend bridge</div></div>
      <div class="project"><b>Trading Bot</b> <span class="badge q">Queued</span><div class="sub">Signal/risk/execution loops</div></div>
      <div class="project"><b>AI Advertising</b> <span class="badge q">Queued</span><div class="sub">Offer + creative + funnel stack</div></div>
      <hr style="border-color:#24324a">
      <div class="sub">Phase 2 next: live backend routing, animated talking states, 3D avatar scene.</div>
    </aside>
  </div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script>
  // 3D background
  const canvas=document.getElementById('bg3d');
  const renderer=new THREE.WebGLRenderer({canvas,antialias:true,alpha:true});
  const scene=new THREE.Scene();
  const camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,.1,1000);camera.position.z=28;
  renderer.setSize(innerWidth,innerHeight);renderer.setPixelRatio(Math.min(devicePixelRatio,2));
  const starsGeo=new THREE.BufferGeometry();const count=1800;const arr=new Float32Array(count*3);
  for(let i=0;i<count*3;i++) arr[i]=(Math.random()-.5)*180; starsGeo.setAttribute('position',new THREE.BufferAttribute(arr,3));
  const stars=new THREE.Points(starsGeo,new THREE.PointsMaterial({size:.18,color:0xb6d3ff,transparent:true,opacity:.9})); scene.add(stars);
  const ring=new THREE.Mesh(new THREE.TorusGeometry(7.5,.12,16,220), new THREE.MeshBasicMaterial({color:0x55d6ff,transparent:true,opacity:.35})); scene.add(ring);
  const ring2=new THREE.Mesh(new THREE.TorusGeometry(9.8,.09,16,220), new THREE.MeshBasicMaterial({color:0x8b5cf6,transparent:true,opacity:.28})); ring2.rotation.x=1.2; scene.add(ring2);
  function animate(){requestAnimationFrame(animate);stars.rotation.y+=.0006;ring.rotation.z+=.003;ring2.rotation.y-=.0025;renderer.render(scene,camera)} animate();
  addEventListener('resize',()=>{camera.aspect=innerWidth/innerHeight;camera.updateProjectionMatrix();renderer.setSize(innerWidth,innerHeight)});

  // chat + voice
  const chat=document.getElementById('chat'),text=document.getElementById('text'),voiceState=document.getElementById('voiceState'),orb=document.getElementById('orb');
  let voiceUnlocked=false;
  function add(role,msg){const d=document.createElement('div');d.className='msg '+(role==='me'?'me':'ai');d.innerHTML=msg;chat.appendChild(d);chat.scrollTop=chat.scrollHeight}
  function pulse(on){orb.style.boxShadow=on?'0 0 0 2px rgba(147,197,253,.35),0 0 120px rgba(76,201,240,.42), inset 0 0 60px rgba(255,255,255,.35)':'0 0 0 2px rgba(147,197,253,.25),0 0 80px rgba(76,201,240,.22), inset 0 0 48px rgba(255,255,255,.25)'}
  function speak(t){
    if(!('speechSynthesis' in window)){add('ai','Voice not supported on this browser.');return}
    if(!voiceUnlocked){add('ai','Tap <b>Enable Voice</b> once, then I can speak.');return}
    const u=new SpeechSynthesisUtterance(t);u.rate=1;u.pitch=.95;u.onstart=()=>{voiceState.textContent='Speaking';pulse(true)};u.onend=()=>{voiceState.textContent='Idle';pulse(false)};
    speechSynthesis.cancel();speechSynthesis.speak(u);
  }
  function aiReply(m){const r=`Copy. Received: ‚Äú${m}‚Äù. I‚Äôm ready to connect this world directly to your live backend next.`;add('ai',r);speak(r)}

  send.onclick=()=>{const v=text.value.trim();if(!v)return;add('me',v);text.value='';aiReply(v)};
  text.addEventListener('keydown',e=>{if(e.key==='Enter')send.onclick()});

  unlock.onclick=()=>{
    voiceUnlocked=true;
    // prime voice per mobile autoplay policy
    const prime=new SpeechSynthesisUtterance('Voice unlocked. Raven online.');
    prime.onstart=()=>{voiceState.textContent='Speaking';pulse(true)};
    prime.onend=()=>{voiceState.textContent='Idle';pulse(false)};
    speechSynthesis.cancel();speechSynthesis.speak(prime);
  };

  const SR=window.SpeechRecognition||window.webkitSpeechRecognition;
  if(SR){const rec=new SR();rec.lang='en-US';rec.interimResults=false;rec.onstart=()=>{voiceState.textContent='Listening';pulse(true)};rec.onend=()=>{voiceState.textContent='Idle';pulse(false)};rec.onresult=e=>{const t=e.results[0][0].transcript;add('me',t);aiReply(t)};mic.onclick=()=>rec.start();}
  else {mic.disabled=true;}

  // uploads
  const drop=document.getElementById('drop'),fi=document.getElementById('fileInput'),ul=document.getElementById('uploads'),upCount=document.getElementById('upCount');
  drop.onclick=()=>fi.click();
  const addFiles=(files)=>{[...files].forEach(f=>{const li=document.createElement('li');li.textContent=`${f.name} (${Math.round(f.size/1024)} KB)`;ul.prepend(li)});upCount.textContent=ul.children.length};
  fi.addEventListener('change',()=>addFiles(fi.files));
  ['dragenter','dragover'].forEach(ev=>drop.addEventListener(ev,e=>{e.preventDefault();drop.classList.add('drag')}));
  ['dragleave','drop'].forEach(ev=>drop.addEventListener(ev,e=>{e.preventDefault();drop.classList.remove('drag')}));
  drop.addEventListener('drop',e=>addFiles(e.dataTransfer.files));
</script>
</body>
</html>